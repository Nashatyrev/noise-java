buildscript {
    repositories {
        jcenter()
        mavenLocal()
        mavenCentral()
    }
}
plugins {
    id "me.champeau.gradle.jmh" version "0.5.2"
}

group 'tech.pegasys.teku'
version '1.0'

repositories {
    jcenter()
    mavenCentral()
    google()
}

apply plugin: "java"

sourceCompatibility = 8
targetCompatibility = 8

dependencies {

    // JUnit testing.
    testImplementation 'javax.xml.bind:jaxb-api:2.3.0'
    testImplementation 'junit:junit:4.13.1'
    testCompile "org.junit.jupiter:junit-jupiter-api:5.2.0"
    testCompile "org.junit.jupiter:junit-jupiter-params:5.2.0"
    testRuntime "org.junit.jupiter:junit-jupiter-engine:5.2.0"

    jmh 'org.openjdk.jmh:jmh-generator-annprocess:1.23'
    jmh "org.openjdk.jmh:jmh-core:1.23"
}

test {
    useJUnitPlatform()
}

task sourcesJar(type: Jar, dependsOn: classes) {
    archiveClassifier.set('sources')
    from sourceSets.main.allSource
}

task javadocJar(type: Jar, dependsOn: javadoc) {
    archiveClassifier.set('javadoc')
    from javadoc.destinationDir
}

artifacts {
    archives sourcesJar
    archives javadocJar
}
